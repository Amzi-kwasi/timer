<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Timer</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Arial, sans-serif;
}

body{
    height:100vh;
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    background-color:#000;
    color:white;
}

/* HEADER */
#header{
    padding:12px;
    text-align:center;
    background:rgba(0,0,0,0.6);
    font-size:clamp(18px,3vw,28px);
}

/* MAIN CONTROLS */
#mainpage{
    padding:15px;
}

#timing{
    display:flex;
    flex-wrap:wrap;
    gap:15px;
    justify-content:center;
    margin-top:20px;
}

label{
    text-align:center;
    font-size:16px;
}

select{
    padding:6px;
    font-size:16px;
}

/* BUTTONS */
button{
    padding:12px 20px;
    font-size:16px;
    border-radius:30px;
    border:none;
    cursor:pointer;
}

.start-timer{
    background:green;
    color:white;
}

.mode-btn{
    background:#444;
    color:white;
}

/* FULL SCREEN DISPLAY */
.timer-display{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.85);
    z-index:10;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

#timer,
#clock{
    font-size:clamp(60px,15vw,300px);
    text-align:center;
    font-weight:bold;
}

.close{
    position:absolute;
    top:15px;
    right:20px;
    font-size:30px;
    cursor:pointer;
}

/* WALLPAPER */
input[type="file"]{
    color:white;
}

/* RESPONSIVE FIX */
@media (max-width:600px){
    #timing{
        flex-direction:column;
    }
}
</style>
</head>

<body onload="init()">

<div id="header">Smart Timer & Clock</div>

<div id="mainpage">

<div id="timing">
<label>Hours<br>
<select id="hours"></select>
</label>

<label>Minutes<br>
<select id="minutes"></select>
</label>

<label>Seconds<br>
<select id="seconds"></select>
</label>

<label>Alarm<br>
<select id="alarm">
<option value="beep">Beep</option>
<option value="buzzer">Buzzer</option>
<option value="silence">Silence</option>
</select>
</label>

<label>Wallpaper<br>
<input type="file" accept="image/*" onchange="setWallpaper(event)">
</label>
</div>

<br><br>

<center>
<button class="start-timer" onclick="startTimer()">Start Timer</button>
<button class="mode-btn" onclick="showClock()">Show Current Time</button>
</center>

</div>

<!-- FULL SCREEN -->
<div class="timer-display" id="display">
<span class="close" onclick="closeDisplay()">Ã—</span>
<div id="timer"></div>
<div id="clock" style="display:none"></div>
</div>

<script>
let interval;
let timeInSeconds=0;

/* Populate selects */
function init(){
    for(let i=0;i<24;i++) hours.innerHTML+=`<option>${i}</option>`;
    for(let i=0;i<60;i++){
        minutes.innerHTML+=`<option>${i}</option>`;
        seconds.innerHTML+=`<option>${i}</option>`;
    }
    alarm.value=localStorage.getItem("alarm")||"beep";
}

/* TIMER */
function startTimer(){
    timeInSeconds =
        (+hours.value*3600) +
        (+minutes.value*60) +
        (+seconds.value);

    if(timeInSeconds<=0) return;

    showDisplay("timer");
    clearInterval(interval);

    interval=setInterval(()=>{
        if(timeInSeconds<0){
            new Audio(alarm.value+".wav").play();
            clearInterval(interval);
            return;
        }

        let h=Math.floor(timeInSeconds/3600);
        let m=Math.floor((timeInSeconds%3600)/60);
        let s=timeInSeconds%60;

        timer.innerHTML=`${h}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        timer.style.color=timeInSeconds<=5?"red":"white";

        timeInSeconds--;
    },1000);
}

/* CLOCK */
function showClock(){
    showDisplay("clock");
    clearInterval(interval);
    interval=setInterval(()=>{
        let now=new Date();
        clock.innerHTML=now.toLocaleTimeString();
    },1000);
}

/* DISPLAY CONTROL */
function showDisplay(mode){
    display.style.display="flex";
    mainpage.style.display="none";
    timer.style.display=mode==="timer"?"block":"none";
    clock.style.display=mode==="clock"?"block":"none";
}

function closeDisplay(){
    clearInterval(interval);
    display.style.display="none";
    mainpage.style.display="block";
}

/* WALLPAPER */
function setWallpaper(e){
    const file=e.target.files[0];
    if(file){
        const reader=new FileReader();
        reader.onload=()=>document.body.style.backgroundImage=`url(${reader.result})`;
        reader.readAsDataURL(file);
    }
}

/* SAVE ALARM */
alarm.onchange=()=>localStorage.setItem("alarm",alarm.value);
</script>

</body>
</html>